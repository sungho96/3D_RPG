0) 이 UI 구조에서 “규칙 3개”만 먼저 고정

Scene UI는 1개(또는 대표 1개)만 관리한다: HUD/메인 UI 같은 “바닥 UI”

Popup UI는 여러 개 가능하고 “마지막에 열린 팝업부터 닫는다”(Stack)

Popup의 정렬(order)은 UIManager가 자동으로 올려준다
→ 팝업은 항상 최상단에 뜬다

이 3개가 흔들리면 운영이 꼬입니다.

1) 씬이 시작될 때(게임 시작/씬 로드 직후)
당신이 해야 하는 동작

Scene UI를 1번만 띄운다

HUD, 인벤토리 베이스, 상단바 같은 것

왜?

Scene UI는 sortingOrder = 0이라 “바닥”이고

이후 열리는 팝업들이 그 위로 자연스럽게 쌓이게 됩니다.

2) “버튼 눌러서 팝업 열기”
당신이 해야 하는 동작

팝업을 ShowPopUI로 연다

팝업 내부 초기화는 Init() 규칙을 탄다(현재 구조상)

체크 포인트(능숙해지려면 여기만 확인)

열 때마다 @UI_Root 밑에 생기는지

팝업이 열릴수록 sortingOrder가 올라가는지 (겹칠 때 위로 올라와야 함)

3) “팝업 위에 팝업 열기” (진짜 실전)

예: 설정 팝업 → 확인 팝업

당신이 해야 하는 동작

그냥 또 ShowPopUI 하면 끝

스택이 쌓이는 구조라서 “닫기 규칙”이 자동으로 맞아집니다.

능숙함 체크(중요)

위에 뜬 팝업을 닫으면 바로 이전 팝업이 남아 있어야 함

실수로 아래 팝업이 먼저 닫히면 스택 규칙이 깨진 것

4) “팝업 닫기”는 두 가지로 생각하면 됩니다
A) 팝업 자신이 닫을 때

팝업 내부에서 ClosePopupUI() 호출
→ UIManager가 스택 top인지 검사하고 닫습니다.

B) 바깥에서 특정 팝업을 닫으려 할 때

ClosePopUI(popup) 호출
→ “최상단이면 닫고, 아니면 실패 로그/리턴”이 맞는 흐름

능숙해지려면:
“최상단이 아닌 팝업을 닫으려 하면 왜 안 되게 막았는지”를 체감해야 합니다.
(스택 규칙 깨지면 UI가 꼬이는 걸 방지)

5) ESC/뒤로가기 같은 “공통 닫기” 동작
당신이 해야 하는 동작

열려있는 팝업이 있으면 무조건 가장 위 팝업을 닫는다

없으면 아무것도 안 하거나(또는 씬 UI에서 처리)

이게 현업에서 가장 흔한 UX 규칙입니다.

6) “Scene UI 교체” 상황(씬 전환/메뉴 변경 등)

현재 코드는 _sceneUI를 잡고만 있고 “기존 제거/교체”는 아직 약합니다.

당신이 해야 하는 기본 태도

Scene UI는 “중복 생성”되면 지저분해지므로
새 Scene UI를 띄우기 전에 기존을 어떻게 할지 규칙을 정해야 합니다.

유지(씬 내 계속)

파괴 후 교체

비활성화 후 교체

지금 단계에서는 “일단 하나만 뜨게” 운용하면 OK입니다.

7) 능숙해지기 위한 “훈련 시나리오 5개”(가장 빠름)

이걸 실제로 한 번씩만 해보면 감이 확 옵니다.

Scene UI 1개 띄우기 → 정상적으로 @UI_Root 밑으로 들어가는지 확인

팝업 1개 띄우기 → sortingOrder가 10부터 시작해서 올라가는지 확인

팝업 2개 연속 띄우기 → 둘이 겹칠 때 두 번째가 위인지 확인

두 번째 팝업 닫기 → 첫 번째가 그대로 남는지 확인

최상단 아닌 팝업을 닫으려 시도 → “Close Popup Failed”가 뜨고 아무 일도 안 일어나는지 확인

지금 구조에서 “자주 터지는 포인트” 2개만 미리 경고

Init 호출 타이밍: 팝업을 만들었는데 Init을 안 타면 SetCanvas가 안 먹을 수 있음
→ “생성되면 Init이 호출된다” 규칙을 유지해야 합니다.

_order 감소: 닫을 때 _order--는 단순하지만, 여러 팝업을 닫고 다시 열 때 정렬이 기대와 다를 수 있습니다.
(학습 단계에서는 큰 문제 없고, 나중에 개선 포인트)

